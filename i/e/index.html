<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title></title><script src="../../t/e/qrcode.min.js"></script></head><body><input type="file" id="a" accept="image/*" /><br><label for="b">Size:</label><input type="number" id="b" value="128" /><div id="c"></div><div id="d"></div><button id="e" style="display:none" onclick="f()">Copy</button><div id="g"></div><button id="h" style="display:none" onclick="i()">Download</button><script>document.getElementById('a').addEventListener('change',j);document.getElementById('b').addEventListener('change',j);const k=new QRCode(document.getElementById("g"));let l=null;function j(){const m=document.getElementById('a').files[0];const n=parseInt(document.getElementById('b').value)||128;k.clear();document.getElementById("g").childNodes[1].setAttribute("style","display:none;");if(m){o();}else if(l){p(l,n);}}function o(){const m=document.getElementById('a').files[0];const n=parseInt(document.getElementById('b').value)||128;if(!m){alert("Please select an image.");return;}l=m;p(m,n);}function p(m,n){const q=new FileReader();q.onload=function(r){const s=new Image();s.src=r.target.result;s.onload=function(){const t=document.createElement('canvas');const u=t.getContext('2d');let v=s.width;let w=s.height;while(v>n||w>n){v*=0.9;w*=0.9;}t.width=v;t.height=w;u.drawImage(s,0,0,v,w);const x=t.toDataURL('image/jpeg').split(',')[1];const y=new URL(window.location.href);const z=y.hostname;y.pathname=y.pathname.endsWith('/')?y.pathname.slice(0,-1):y.pathname;const A=y.pathname.split('/');if(A.length>0&&A[A.length-1]==="index.html"){A.pop();}A.pop();const B=A.join('/');y.pathname=B;const C=`${y.protocol}//${z}${y.pathname}/d/#${x}`;document.getElementById('d').innerHTML=`<a href="${C}" target="_blank">${C}</a>`;document.getElementById('e').style.display='inline-block';q(x);try{k.makeCode(C);document.getElementById('h').style.display='inline-block';}catch(D){console.error(D);document.getElementById('h').style.display='none';}};};q.readAsDataURL(m);}function q(x){const E=document.createElement('img');E.src='data:image/jpeg;base64,'+x;E.alt=x;E.style.maxWidth='100%';document.getElementById('c').innerHTML='';document.getElementById('c').appendChild(E);}function f(){const G=document.getElementById('d').querySelector('a');if(G){const H=document.createElement("textarea");H.value=G.href;document.body.appendChild(H);H.select();document.execCommand('copy');document.body.removeChild(H);alert("Copied to clipboard:\n"+G.href);}}function i(){const I=document.getElementById('g').querySelector('img');if(I){const J=document.createElement('a');J.href=I.src;J.download='qrcode.png';document.body.appendChild(J);J.click();document.body.removeChild(J);}}</script></body></html>
